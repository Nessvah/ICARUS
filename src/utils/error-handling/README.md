# Error Handling in GraphQL

This document describes the error handling system used in our GraphQL server, which follows Apollo Server's best practices.

## CustomErrors.js file

Our custom errors are designed to provide detailed, standardized error messages to the client. These errors are found in the `shared/utils/error-handling` directory.

### List of Custom Errors

- `AuthenticationError`: Used when user authentication fails.
- `AuthorizationError`: Used when a user is authenticated but not authorized to perform a requested operation.
- `DatabaseError`: Used for errors related to database operations.
- `InternalError`: Represents unexpected errors within the server.
- `NotFoundError`: Used when a requested resource is not found.
- `RateLimitError`: Applied when a user hits the rate limit for API requests.
- `ServiceUnavailableError`: Used when an external service is unavailable.
- `UserInputError`: Represents errors in user input that don't align with the expected format.
- `ValidationError`: Used for data validation errors within the application.

### Usage

Errors should be thrown in resolver functions as appropriate. For example:

import { AuthenticationError } from '../../customErrors/AuthenticationError';

if (!user) {
throw new AuthenticationError('User not authenticated');
}

### The formatError.js file is used to format errors before they are sent to the client. It ensures that errors are returned in a consistent structure.

Checks if the given error is an instance of any of the customErrors or GraphQLError. If it is, the function returns an object with the error message, any error extensions, locations, and path. The customFormatError function can be used to customize the format of errors, allowing to return more informative and consistent error messages to users.

if in production enviroment only shows the error message, not other details for security.

### The errorHandlingTests.test.js file has unit tests for each custom error type generated by formatError.js

# Contributing to the error handling system, please ensure to:

- Create a new custom error class in the customErrors directory if it does not already exist for the error type.
- Extend from the appropriate Apollo Server error class if applicable.
- Use meaningful error messages that can assist in debugging.
- Write unit tests for new error types in errorHandlingTests.test.js.
- Document the usage of new errors in this README.md.
